<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Account Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="user">
  <form [formGroup]="updateUserForm">
    <ion-item lines="none">
      <ion-label>
        <ion-icon name="person-outline"></ion-icon>
        Name
      </ion-label>
    </ion-item>
    <ion-item lines="none">
      <ion-label></ion-label>
      <ion-input formControlName="firstName" placeholder="First Name"></ion-input>
      <ion-button (click)="onUpdateFirstName()" [disabled]="firstNameCtrl?.errors">
        Update
      </ion-button>
    </ion-item>
    <ion-item lines="none">
      <ion-label></ion-label>
      <ion-input formControlName="lastName" placeholder="Last Name"></ion-input>
      <ion-button (click)="onUpdateLastName()" [disabled]="lastNameCtrl?.errors">
        Update
      </ion-button>
    </ion-item>

    <ion-item lines="none">
      <ion-label>
        <ion-icon name="mail-outline"></ion-icon>
        Email
      </ion-label>
    </ion-item>
    <ion-item lines="none">
      <ion-label></ion-label>
      <ion-input formControlName="email" placeholder="Email"></ion-input>
      <ion-button (click)="onUpdateEmail()" [disabled]="emailCtrl?.errors">
        Update
      </ion-button>
    </ion-item>

    <ion-item lines="none">
      <ion-label>
        <ion-icon name="key-outline"></ion-icon>
        Password
      </ion-label>
    </ion-item>
    <ion-item lines="none">
      <ion-label></ion-label>
      <ion-input formControlName="currentPassword" [type]="showCurrentPassword?'text':'password'" placeholder="Current Password"></ion-input>
      <ion-button fill="clear" (click)="toggleVisibleCurrentPassword()">
        <ion-icon slot="icon-only" [name]="showCurrentPassword?'eye-outline':'eye-off-outline'"></ion-icon>
      </ion-button>
    </ion-item>
    <ion-item lines="none">
      <ion-label></ion-label>
      <ion-input formControlName="newPassword" [type]="showNewPassword?'text':'password'" placeholder="New Password"></ion-input>
      <ion-button fill="clear" (click)="toggleVisibleNewPassword()">
        <ion-icon slot="icon-only" [name]="showNewPassword?'eye-outline':'eye-off-outline'"></ion-icon>
      </ion-button>
    </ion-item>
    <ion-item class="note" lines="none">
      <ion-note>
        * Password must be at least {{minPasswordLen}} characters long
      </ion-note>
    </ion-item>
    <ion-item lines="none">
      <ion-button (click)="onUpdatePassword()" [disabled]="newPasswordCtrl?.errors || currentPasswordCtrl?.errors">
        Update
      </ion-button>
    </ion-item>
  </form>
</ion-content>